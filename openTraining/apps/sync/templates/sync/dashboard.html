{% extends 'sync/base.html' %}
{% load sync_extras %}
{% load static %}
{% block content %}

    <div class="row">

        <!--#region Forme du jour -->
        <div class="col-6">
            <div class="opentraining-panel mt-4 shadow">
                {% if wellness %}
                    <h1>Forme du jour</h1>
                    <div class="mt-4">
                        <div class="row justify-content-md-center">
                            <div class="col-4 col-auto">
                            <div class="c100 p{{ wellness.value }}">
                                <span>{{ wellness.value | floatformat:'0' }}%</span>
                                <div class="slice">
                                    <div class="bar"></div>
                                    <div class="fill"></div>
                                </div>
                            </div>
                                </div>
                        </div>
                    </div>
                {% else %}
                    <form action="/dashboard/" method="POST">
                        {% csrf_token %}
                        <div class="row">
                            <h1 class="col-6">Forme du jour</h1>
                            <div class="col-6 text-right">
                                <button type="submit" class="btn btn-primary">Enregistrer</button>
                            </div>
                        </div>
                        <div class="mt-4">
                            <div class="form-group row">
                                <label for="id_humeur" class="col-3 col-form-label opentraining-panel-font">Humeur</label>
                                <div class="col-9">
                                    <input type="range" name="humeur" required id="id_humeur" min="0" max="100" step="10"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="id_sommeil" class="col-3 col-form-label opentraining-panel-font">Sommeil</label>
                                <div class="col-9">
                                    <input type="range" name="sommeil" required id="id_sommeil" min="0" max="100" step="10"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="id_musculaire" class="col-3 col-form-label opentraining-panel-font">Musculaires</label>
                                <div class="col-9">
                                    <input type="range" name="musculaire" required id="id_musculaire" min="0" max="100" step="10"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="id_stress" class="col-3 col-form-label opentraining-panel-font">Stress</label>
                                <div class="col-9">
                                    <input type="range" name="stress" required id="id_stress" min="0" max="100" step="10"/>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label for="id_fatigue" class="col-3 col-form-label opentraining-panel-font">Fatigue</label>
                                <div class="col-9">
                                    <input type="range" name="fatigue" required id="id_fatigue" min="0" max="100" step="10"/>
                                </div>
                            </div>
                        </div>
                    </form>
                {% endif %}
            </div>
        </div>
        <!--#endregion -->

        <!--#region Dernière activités -->
        <div class="col-6">
            <div class="opentraining-panel mt-4 shadow">
                <h1>Dernière(s) activité(s)</h1>
                <div class="content mt-4">
                    {% for activity in activities %}
                        <div class="row pb-3">
                            <div class="ml-3">
                                {% if activity.type == 1 %}
                                    <img src="{% static 'img/swimming.png' %}" class="opentraining-image" alt="Natation" title="Natation"/>
                                {% elif activity.type == 2 %}
                                    <img src="{% static 'img/cycling.png' %}" class="opentraining-image" alt="Vélo" title="Vélo"/>
                                {% elif activity.type == 3 %}
                                    <img src="{% static 'img/running.png' %}" class="opentraining-image" alt="Course à pied" title="Course à pied"/>
                                {% else %}
                                    <img src="{% static 'img/autres.png' %}" class="opentraining-image" alt="Autres" title="Autres"/>
                                {% endif %}
                            </div>
                            <div class="col-9 ml-2">
                                <div class="opentraining-panel-font">{{ activity.name }} - {{ activity.elapsed_time | seconds_to_minutes }} min</div>
                                <div class="opentraining-panel-foot">{{ activity.date | date:"d/m/Y H:i"}}</div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!--#endregion -->
    </div>
    <!--#region Récapitulatif hebdo-->
    <div class="row mt-3">
        <div class="col-12">
            <div class="opentraining-panel mt-4 shadow">
                <h1>Récapitulatif hebdomadaire</h1>
                <div class="row mt-4">
                    <div class="col-4">
                        <div class="row">
                            <div class="ml-3">
                                <img src="{% static 'img/swimming.png' %}" class="opentraining-image" alt="Natation" title="Natation"/>
                            </div>

                            <div class="col-9">
                                <div class="row mb-1">
                                    <div class="col opentraining-recap-distance">{{ resume.swim.duration | duration }}</div>
                                    <div class="col justify-content-between text-right">{{ resume.swim.distance | swim_arround | floatformat:"0" }} m</div>
                                </div>
                                <div class="progress" style="height: 0.5em">
                                  <div class="progress-bar bg-info" role="progressbar" style="width: {% if resume.swim.duration %}100%{% else %}0{% endif %}" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row">
                            <div class="ml-3">
                                <img src="{% static 'img/cycling.png' %}" class="opentraining-image" alt="Vélo" title="Vélo"/>
                            </div>

                            <div class="col-9">
                                <div class="row mb-1">
                                    <div class="col opentraining-recap-distance">{{ resume.bike.duration | duration }}</div>
                                    <div class="col justify-content-between text-right">{{ resume.bike.distance | distance_to_km | floatformat:"1" }} km</div>
                                </div>
                                <div class="progress" style="height: 0.5em">
                                  <div class="progress-bar bg-info" role="progressbar" style="width: {%  if resume.bike.duration %}100%{% else %}0{% endif %}" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                    <div class="col-4">
                        <div class="row">
                            <div class="ml-3">
                                <img src="{% static 'img/running.png' %}" class="opentraining-image" alt="Course à pied" title="Course à pied"/>
                            </div>

                            <div class="col-9">
                                <div class="row mb-1">
                                    <div class="col opentraining-recap-distance">{{ resume.run.duration | duration  }}</div>
                                    <div class="col justify-content-between text-right">{{ resume.run.distance | distance_to_km | floatformat:"1" }} km</div>
                                </div>
                                <div class="progress" style="height: 0.5em">
                                  <div class="progress-bar bg-info" role="progressbar" style="width: {%  if resume.run.duration %}100%{% else %}0{% endif %}" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--#endregion -->
{% endblock %}
